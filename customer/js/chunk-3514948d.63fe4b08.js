(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3514948d"],{"0ffe":function(t,e,n){t.exports=n.p+"img/telephone.974edcd2.svg"},"2c3e":function(t,e,n){t.exports=n.p+"img/user.92c33ec7.svg"},5307:function(t,e,n){"use strict";n("927c")},6250:function(t,e,n){},"73bc":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return u}));var c=n("1bab");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(c["a"])({url:"/vuedata/customer.php",params:{keywords:t,page:e,time:n}})}function i(t){return Object(c["a"])({url:"/vuedata/customerdetail.php",params:{id:t}})}function s(t){return Object(c["a"])({url:"/vuedata/addcustomer.php",params:{customer:t}})}function a(t){return Object(c["a"])({url:"/vuedata/updateCustomer.php",params:{customer:t}})}function u(t){return Object(c["a"])({url:"/vuedata/deleteCutomer.php",params:{id:t}})}},"927c":function(t,e,n){},"9b41":function(t,e,n){"use strict";n("6250")},a5d7:function(t,e,n){"use strict";n("c3e5")},ab35:function(t,e,n){t.exports=n.p+"img/location.04933b4a.svg"},c3e5:function(t,e,n){},d8c9:function(t,e,n){"use strict";n.r(e);var c,o,i,s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"customer"}},[n("van-nav-bar",{staticClass:"customer-nav",attrs:{title:"客户管理"}}),n("search-box",{on:{changeKeys:t.changeKeys,searchclick:t.searchclick}}),n("customer-content",{attrs:{"customer-list":t.currentCustomer},on:{onLoad:t.onLoad,updateClick:t.updateClick,deleteClick:t.deleteClick}})],1)},a=[],u=n("2909"),r=n("ade3"),l=(n("2994"),n("2bdd")),d=(n("5246"),n("6b41")),m=(n("b0c0"),n("a434"),n("73bc")),f=n("9521"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"customer-content"},[n("van-list",{attrs:{"finished-text":"没有更多了",finished:t.customerList["finished"],offset:10},on:{load:t.onLoad},model:{value:t.customerList["loading"],callback:function(e){t.$set(t.customerList,"loading",e)},expression:"customerList['loading']"}},t._l(t.customerList.list,(function(e,c){return n("customer-item",{key:c,attrs:{customer:e},on:{updateClick:function(n){return t.updateClick(e)},deleteClick:function(n){return t.deleteClick(e,c)}},nativeOn:{click:function(n){return t.itemClick(e.id)}}})})),1),n("div",{staticClass:"addCustomer",on:{click:t.addCustomer}},[t._v("+")])],1)},h=[],b=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"customer-item"},[c("van-swipe-cell",{scopedSlots:t._u([{key:"left",fn:function(){return[c("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:t.deleteClick}})]},proxy:!0},{key:"right",fn:function(){return[c("van-button",{staticClass:"delete-button",attrs:{square:"",text:"修改",type:"primary"},on:{click:t.updateClick}})]},proxy:!0}])},[c("div",{staticClass:"swipe-cell-box"},[c("div",{staticClass:"right-content"},[c("div",{staticClass:"customer-row"},[c("h4",[t._v(t._s(t.customer.corporatename))])]),c("div",{staticClass:"customer-row",staticStyle:{display:"flex"}},[c("div",{staticStyle:{flex:"1"}},[c("i",{staticClass:"customer-icon"},[c("img",{attrs:{src:n("2c3e")}})]),t._v(t._s(t.customer.name)+" ")]),c("div",{staticStyle:{flex:"1"}},[c("i",{staticClass:"customer-icon"},[c("img",{attrs:{src:n("0ffe")}})]),t._v(t._s(t.customer.telephone)+" ")])]),c("div",{staticClass:"customer-row"},[c("i",{staticClass:"customer-icon"},[c("img",{attrs:{src:n("ab35")}})]),t._v(t._s(t.customer.location))])])])])],1)},C=[],v=(n("c194"),n("7744")),g=(n("66b9"),n("b650")),k=(n("9cb7"),n("66fd")),O=(n("4467"),n("c36e")),j={name:"CustomerItem",components:(c={},Object(r["a"])(c,O["a"].name,O["a"]),Object(r["a"])(c,k["a"].name,k["a"]),Object(r["a"])(c,g["a"].name,g["a"]),Object(r["a"])(c,v["a"].name,v["a"]),c),data:function(){return{iconUrl:{}}},props:{customer:{type:Object,default:function(){return{}}}},methods:{updateClick:function(){this.$emit("updateClick")},deleteClick:function(){this.$emit("deleteClick")}}},x=j,y=(n("a5d7"),n("2877")),w=Object(y["a"])(x,b,C,!1,null,"0250fe3f",null),_=w.exports,$={name:"CustomerContent",components:(o={},Object(r["a"])(o,l["a"].name,l["a"]),Object(r["a"])(o,"CustomerItem",_),o),data:function(){return{}},props:{customerList:{type:Object,default:function(){return{}}}},methods:{onLoad:function(){this.$emit("onLoad")},itemClick:function(t){localStorage.setItem("customerdetailid",t),this.$router.push({name:"customerdetail",params:{id:t}}).catch((function(t){}))},addCustomer:function(){this.$router.push("/addcustomer").catch((function(t){}))},updateClick:function(t){this.$emit("updateClick",t.id)},deleteClick:function(t,e){this.$emit("deleteClick",t.id,e)}}},I=$,L=(n("9b41"),Object(y["a"])(I,p,h,!1,null,"0e8d2001",null)),S=L.exports,T={name:"Customer",components:(i={},Object(r["a"])(i,d["a"].name,d["a"]),Object(r["a"])(i,l["a"].name,l["a"]),Object(r["a"])(i,"SearchBox",f["a"]),Object(r["a"])(i,"CustomerContent",S),i),data:function(){return{customerObj:{customerIndex:{page:0,list:[],loading:!1,refreshing:!1,finished:!1,total:0,time:0}},currentType:"customerIndex"}},methods:{searchclick:function(t){this.getCustomer(t)},getCustomer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.customerObj["customerIndex"],n=e.page+1;Object(m["c"])(t,n).then((function(t){var n;e.loading=!1,null!=t&&0!==t.length?(e.total=t[0]["count"],(n=e.list).push.apply(n,Object(u["a"])(t)),e.page+=1,e.list.length>=e.total&&(e.finished=!0)):e.finished=!0}))},debounce:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;window.timeout&&clearTimeout(window.timeout),window.timeout=setTimeout((function(){t()}),e)},changeKeys:function(t){var e=this;this.debounce((function(){""==t&&(e.customerObj["customerIndex"].finished=!1),e.customerObj["customerIndex"].list=[],e.customerObj["customerIndex"].page=0,e.getCustomer(t)}))},updateClick:function(t){localStorage.setItem("updateCustomerid",t),this.$router.push("/updatecustomer").catch((function(t){}))},deleteClick:function(t,e){var n=this;this.$dialog.confirm({title:"警告",message:"请注意该操作不可恢复,是否继续删除该条数据?"}).then((function(){Object(m["b"])(t).then((function(t){setTimeout((function(){n.customerObj["customerIndex"].list.splice(e,1),n.$toast(t)}),800)}))})).catch((function(){n.$toast("取消")}))},onLoad:function(){this.getCustomer()}},computed:{currentCustomer:function(){return this.customerObj["customerIndex"]}},mounted:function(){},activated:function(){console.log("activated")},deactivated:function(){var t=document.body.scrollTop;console.log(t+"deactivated")}},E=T,K=(n("5307"),Object(y["a"])(E,s,a,!1,null,"497b8393",null));e["default"]=K.exports}}]);
//# sourceMappingURL=chunk-3514948d.63fe4b08.js.map